# インターネット工学演習 07

## 静的ルーティング

### ルーティングテーブルの現状の確認

ルーティングテーブル確認コマンド

```bash
ip r
```


実行結果の例

```
default via 192.168.0.65 dev eno1 proto static metric 105 
169.254.0.0/16 dev eno1 scope link metric 1000 
192.168.0.0/27 via 192.168.0.65 dev eno1 
192.168.0.32/27 via 192.168.0.65 dev eno1 
192.168.0.64/27 dev eno1 proto kernel scope link src 192.168.0.66 metric 105 
192.168.0.96/27 dev enx8857ee65781e proto kernel scope link src 192.168.0.97 metric 104 
192.168.0.128/27 via 192.168.0.65 dev eno1 
192.168.0.160/27 via 192.168.0.65 dev eno1 
192.168.0.192/27 via 192.168.0.65 dev eno1 
192.168.0.224/27 via 192.168.0.65 dev eno1 
```


### 不足しているルーティングテーブルの登録

ip route コマンドの文法

```bash
sudo ip route add 宛先ネットワーク/サブネット via ゲートウェー dev インターフェース
```

例

```bash
sudo ip route add 192.168.0.112/28 via 192.168.0.98 dev enx8857ee65781e
sudo ip route add 192.168.0.176/28 via 192.168.0.65 dev eno1
sudo ip route add 192.168.0.240/28 via 192.168.0.65 dev eno1
```

### グループ


* がついている人が、班の中の今日のリーダです
* 毎回の授業で、リーダの人が代表して sudo コマンドを実行します
* リーダー以外の人がsudo コマンドを実行してはいけません。

```
1班

1611140053
1811140016
L 1811140051
1811140031
1811140025
1811140077

２班

1811140075
1811140063
L 1611140017
1811140045
1811140057
1811140020

３班

1811140007
1811140058
L 1611140076
1811140036
1811140010
1811140024

４班

1811140054
1811140070
L 1811140040
1811140053
1811140038
1811140068

５班

1611140051
1811140080
L 2011141001
1811140033
1811140030
1811140067

６班

1711140059
1811140052
L 1811140032
1811140079
1811140023
1811140008

７班

1711140016
1811140012
L 1811140061
1811140022
1811140002
1811140078

８班

1811140042
1811140044
L 1811140015
1811140017a
1811140066
1811140001

９班

1711140049
1811140029
L 1811140019
1811140011
1811140037
1811140050

10班

1811140064
1811140071
L 1811140034
1811140003
1811140073
1811140014
```


## 担当ルータ

先週から変更しない

| R    | A0   | A1   | A2   | B0   | B1   | B2   | C0   | C1   | C2   |
| :--- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 10班 | 1班  | 2班  | 3班  | 4班  | 5班  | 6班  | 7班  | 8班  | 9班  |

## 実施内容

### 班ごとの担当ルータのルーティングテーブルの作成



新しいネットワーク構成図（下図）でのルーティングテーブルを作成し、班ごとにまとまて提出する



### ping とtraceroute による接続状態の確認

現在のルーティングテーブルの状態（３つのネットワークが接続される前の状態）でどこまで到達可能か調べる

```bash
ping ipアドレス

traceroute ipアドレス
```

## ネットワーク構成

```
                                     Internet
                                 <106.157.214.199>
                                     [ルータ]
                                         |
      26                 27              1           (192.168.0.X)
    ---+------------------+--------------+----------- 192.168.0.0/27
     [ T ](SSH)         [ R ]
                          |
  33      34      35      36                         (192.168.0.X)
--+-------+-------+-------+-------------------------- 192.168.0.32/27
[ C0]   [ B0]   [ A0] 
  |       |       |
  |       |      65     66                            (192.168.0.X)
  |       |      -+------+---------------------------- 192.168.0.64/27
  |       |            [ A1]  
  |       |              |               
  |       |             97      98                    (192.168.0.X)
  |       |             -+-------+-------------------- 192.168.0.96/28
  |       |                    [ A2] 
  |       |                      |
  |       |                    113     114            (192.168.0.X)
  |       |               -------+-------+------------ 192.168.0.112/28
  |       |                            [ A3] 
  |       |                     
  |     129    130                                    (192.168.0.X)
  |      -+------+------------------------------------ 192.168.0.128/27
  |            [ B1]  
  |              |
  |            161     162                            (192.168.0.X)
  |             -+-------+---------------------------- 192.168.0.160/28
  |                    [ B2]
  |                      |
  |                    177     178                    (192.168.0.X)
  |               -------+-------+-------------------- 192.168.0.176/28
  |                            [ B3]
  |                    
193    194                                            (192.168.0.X)
 -+------+-------------------------------------------- 192.168.0.192/27
       [ C1] 
         |
       225     226                                    (192.168.0.X)
        -+-------+------------------------------------ 192.168.0.224/28
               [ C2]
                 |
               241      242                           (192.168.0.X)
           -------+-------+--------------------------- 192.168.0.240/28
                        [ C3]

```